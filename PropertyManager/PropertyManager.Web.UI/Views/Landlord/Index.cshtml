@{
    ViewData["Title"] = "Landlords";
}

<table class="mt-3 table-striped table-bordered" id="landlordsTable">
    <thead class="thead-light">
        <tr>
            <th>Id</th>
            <th>First Name</th>
            <th>LastName</th>
            <th>Email</th>
            <th class="no-sort">Mobile</th>
            <th class="no-sort">Home Phone</th>
            <th class="no-sort">Register Number</th>
            <th>Approval Status</th>
            <th class="no-sort"></th>
        </tr>
    </thead>
</table>

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#landlordsTable').DataTable({
                "processing": true,
                "serverSide": true,
                "filter": true,
                "orderMulti": false,
                "language": {
                    "search": "Search Last Name"
                },
                "ajax": {
                    "url": "/Landlord/LoadIndexData",
                    "type": "POST",
                    "datatype": "json"
                },
                "columnDefs": [{
                    "targets": [0],
                    "visible": false,
                    "searchable": false
                },
                {
                    "targets": 'no-sort',
                    "orderable": false,
                    "searchable": false
                }],
                "columns": [
                    { "data": "landlordId", "name": "LandlordId", "autoWidth": true },
                    { "data": "firstName", "name": "FirstName", "autoWidth": true },
                    { "data": "lastName", "name": "LastName", "autoWidth": true },
                    { "data": "email", "name": "Email", "autoWidth": true },
                    { "data": "mobilePhone", "name": "MobilePhone", "autoWidth": true },
                    { "data": "homePhone", "name": "HomePhone", "autoWidth": true },
                    { "data": "registerNumber", "name": "RegisterNumber", "autoWidth": true },
                    {
                        "name": "ApprovalStatus",
                        "autoWidth": true,
                        "render": function (data, type, full, meta) {
                            if (full.approvalStatusString === 'APPROVED') {
                                return '<span class="badge badge-success badge-pill">Approved</span>'
                            } else if (full.approvalStatusString === 'SUBMITTED') {
                                return '<span class="badge badge-info badge-pill">Submitted</span>'
                            } else {
                                return '<span class="badge badge-danger badge-pill">Rejected</span>'
                            }
                        },
                    },
                    {
                        "render": function (data, type, full, meta) {
                            return '<a href="/landlord/details/' + full.landlordId + '">View</a>'
                        }
                    }
                ]
            });
        });
    </script>
}
